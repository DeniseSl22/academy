<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/print.css" media="print">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/webservice.css" media="screen" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>WikiPathways Academy</title>
</head>

  <body>

    <header id="banner">
      <div class="inner">
        <h1>WikiPathways Academy</h1>
        <h2>Organized challenges for new WikiPathways authors</h2>
	<a href="../../" class="button"><small>Return to</small>Overview</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
            <a id="intro" class="anchor" href="#intro" aria-hidden="true">
              <span aria-hidden="true" class="octicon octicon-link">
              WikiPathways: Edit a Pathway
              </span>
            </a>
          </h1>

          <h2>Background</h2>
	  <p>
	  This challenge pulls together your skills with both WikiPathways and the pathway editing tool.
	  Mastery of these tools is essential to sharing the pathway information you collect and curate.
	  We will use the tutorial pathway you uploaded earlier, but the same steps apply to editing <i>any </i>
	  pathway at WikiPathways.
	</p>
          <h2>Challenge</h2>
	  <p>
	  Make an edit to your tutorial pathway at WikiPathways. You will need your username and 
	  password to update WikiPathways from the editor tool.
	  </p> 
	  <div >
                  <form id="download-pathway">
                          Provide the WPID
			  of the pathway you want to edit, e.g, WP3917, and then click <b>Launch Editor</b>:
                          <br />
			  <input type="text" name="wpidload" value="" placeholder="WPID"><br />
                  </form>

          	<button id="download-from-page" type="button" class="btn btn-primary">Launch Editor</button>

          <!-- Button trigger modal -->
          <button id="launch-modal" type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
            Launch Editor
          </button>

          <!-- Modal -->
          <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                  <img src="../../images/jnlp-instructions.png">
                </div>
                <div class="modal-footer">
                  <label><input type="checkbox" id="dont-show-instructions" value="first_checkbox"> Don't show instructions again </label>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button id="download-from-modal" type="button" class="btn btn-primary" data-dismiss="modal">Download</button>
                </div>
              </div>
            </div>
          </div>  
	  <br />
          <br />
          <ul>
                  <li>Once you have your pathway loaded, make a change... any change. For example, move nodes around, 
			change labels, etci.</li>
                  <li>Find the WikiPathway menu under <b>Plugins</b> in the editor toolbar and select <b>Update</b></li>
		<li>Enter your username and password for WikiPathways</li>
		<li>Enter a comment to summarize your edits. Note: this comment will be recorded on the Pathway Page as part of the
			history of the pathway at WikiPathways. See <b>History</b> section.</li>
                  <li>Done! Check out your changes at WikiPathways and verify your work below</li>
          </ul>
          <br />

                  <form id="wp-edit-pathway">
                          Provide your username and the WPID
                          of the pathway you edited, e.g, WP3917:
                          <br />
                          <input type="text" name="username" value="" placeholder="Username"><br />
                          <input type="text" name="wpid" value="" placeholder="WPID"><br />
                  </form>

                  <button id="wp-edit-pathway-button">Verify</button>
	</div>
	<div class="results" id="success" style="display:none;">
		<h2>Result</h2>
		<p>You did it!</p>
	</div>
	 <div class="results" id="error" style="display:none;">
		 <h2>Result</h2>
		 <p>Hmm... something went wrong. Try again.</p>
	 </div>
		<br /> <br /> <br />
	</section>
	    </div>
	  </div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.sciencegamelab.org/js/sciapi.js"></script>
    <script type="text/javascript" src="../../javascripts/sgl-init.js"></script>
    <script type="text/javascript" src="../../javascripts/sgl.js"></script>
    <script type="text/javascript" src="../../javascripts/webservice.js"></script>
  
   <script type="text/javascript">
      function getShowInstructions() {
        var showInstructions = localStorage.getItem('showChallengeInstructions') === 'false' ? false : true;
        if (showInstructions) {
          $('#download-from-page').hide();
          $('#launch-modal').show();
        } else {
          $('#launch-modal').hide();
          $('#download-from-page').show();
        }
        return showInstructions;
      }
      function setDownloadButton() {
        var downloadButton = getShowInstructions() ? $('#download-from-modal') : $('#download-from-page');
        downloadButton.click(function() {
	var wpid= $('[name=wpidload]').val(); 
          if ($('#dont-show-instructions').is(':checked')) {
            localStorage.setItem('showChallengeInstructions', 'false');
          }
          // server must set Content-Disposition: attachment
          window.location = 'https://rcbranch.wikipathways.org/wpi/extensions/PathwayViewer/pathway-jnlp.php?identifier='+wpid+'&filename=WikiPathwaysAcademy-Challenge';

	 // set verfication form field for user convenience
	$('[name=wpid]').val(wpid);

          getShowInstructions();
          setDownloadButton();
        });
      }
      setDownloadButton();
	</script>
  </body>
</html>
