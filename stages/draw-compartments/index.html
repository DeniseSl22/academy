<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/print.css" media="print">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>WikiPathways Academy</title>
</head>

  <body>

    <header id="banner">
      <div class="inner">
        <h1>WikiPathways Academy</h1>
        <h2>Organized challenges for new WikiPathways authors</h2>
	<a href="../../" class="button"><small>Return to</small>Overview</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
            <a id="intro" class="anchor" href="#intro" aria-hidden="true">
              <span aria-hidden="true" class="octicon octicon-link">
                Draw a Complex
              </span>
            </a>
          </h1>

          <h2>Background</h2>

          <p>Cellular compartments in cell biology comprise all of the closed parts within the cytosol of a eukaryotic cell, usually 
          surrounded by a single or double lipid layer membrane. These compartments are often, but not always, defined as membrane 
          enclosed regions. The formation of cellular compartments is called compartmentalization. Both organelles, the mitochondria 
          and chloroplasts (in photosynthetic organisms), are compartments. Other compartments such as peroxisomes, lysosomes, the 
          endoplasmic reticulum, the cell nucleus or the Golgi apparatus are not of endosymbiotic origin. Smaller elements like 
          vesicles, and sometimes even microtubules can also be counted as compartments. Source: <a href="https://en.wikipedia.org/wiki/Cellular_compartment">Wikipedia</a></p>

          <h2>Your Mission</h2>
          <pDraw the compartment depicted in this figure:</p>
          <img src="draw-complex-solution.png">
          
          <ul>
            <li>To complete this challenge, click the "Launch Editor" button below. You will receive your challenge as a file named "WikiPathwaysAcademy-Challenge.jnlp". 
              Open it to see your control panel.</li>
            <li>
            <details>
             <summary>Perform the challenge tasks...</summary>
              <ul>
                <li>Select the “Cell” object from the Objects panel or the tool bar</li>
                <li>Click on canvas to place the object</li>
                <li>With the Cell object selected, use the yellow resize targets to change the size of the object</li>
                <li>With the Cell object selected, click and drag anywhere on the object outline to position it over the entire catalysis reaction</li>
                <li>Done!</li>
              </ul>
            </details>
            </li>
            <li>When you have completed the challenge, save your work as a GPML file under <b>File > Save As</b>.</li>
            <li>Drag-n-drop the GPML file below to submit.</li>
          </ul>
          <button id="download-from-page" type="button" class="btn btn-primary">Launch Editor</button>

          <!-- Button trigger modal -->
          <button id="launch-modal" type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
            Launch Editor
          </button>

          <!-- Modal -->
          <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                  <img src="../../images/jnlp-instructions.png">
                </div>
                <div class="modal-footer">
                  <label><input type="checkbox" id="dont-show-instructions" value="first_checkbox"> Don't show instructions again </label>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button id="download-from-modal" type="button" class="btn btn-primary" data-dismiss="modal">Download</button>
                </div>
              </div>
            </div>
          </div>  

          <div id="upload-target-container"></div>  

          <br>  
          <br> 
	  <p><a href="draw-compartment-solution.gpml">Click to download solution file (For Testing Only)</a>
	  </p>
		<br /> <br /> <br />
	      </section>
          </div> 
    </div>       

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.sciencegamelab.org/js/sciapi.js"></script>
    <script type="text/javascript" src="../../javascripts/sgl-init.js"></script>
    <script type="text/javascript" src="../../javascripts/sgl.js"></script>
    <script type="text/javascript" src="../../javascripts/upload-target.js"></script>

    <script type="text/javascript">
      function getShowInstructions() {
        var showInstructions = localStorage.getItem('showChallengeInstructions') === 'false' ? false : true;
        if (showInstructions) {
          $('#download-from-page').hide();
          $('#launch-modal').show();
        } else {
          $('#launch-modal').hide();
          $('#download-from-page').show();
        }
        return showInstructions;
      }
      function setDownloadButton() {
        var downloadButton = getShowInstructions() ? $('#download-from-modal') : $('#download-from-page');
        downloadButton.click(function() {
          if ($('#dont-show-instructions').is(':checked')) {
            localStorage.setItem('showChallengeInstructions', 'false');
          }
          // server must set Content-Disposition: attachment
          window.location = 'https://rcbranch.wikipathways.org/wpi/extensions/PathwayViewer/pathway-jnlp.php?identifier=WP3913&filename=WikiPathwaysAcademy-Challenge';
          getShowInstructions();
          setDownloadButton();
        });
      }
      setDownloadButton();
      window.wpAcademy.init({
        uploadTargetContainerSelector: '#upload-target-container',
        validate: function(actualStr) {          
          var actualDoc = window.xmlReader.parseSync(actualStr);
          // DataNode count
          return window.xmlQuery(actualDoc).find('DataNode').map(function(node) { return node.name }).length === 3 &&
            window.xmlQuery(actualDoc).find('DataNode').map(function(DataNodeEl) {
              return DataNodeEl.attributes.hasOwnProperty('TextLabel') && DataNodeEl.attributes.hasOwnProperty('GraphId');
            })
            .reduce(function(acc, pass) {
              return acc && pass;
            });
           },
         action: 'draw-compartments',
         points: 5
      });
    </script>
  </body>
</html>
